<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>é…’æ¡Œæ¨¡æ‹Ÿå™¨ - æ˜¥èŠ‚ç‰¹åˆ«ç‰ˆ</title>
  <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    :root {
      --red: #B91C1C;
      --red-dark: #7F1D1D;
      --red-deeper: #450A0A;
      --red-bg: #7F1D1D;
      --red-light: #DC2626;
      --red-soft: #FEE2E2;
      --gold: #E6C37D;
      --gold-light: #F2E6C2;
      --gold-dark: #CA8A04;
      --gold-border: rgba(230,195,125,0.5);
      --card-bg: #FFFBF0;
      --card-bg-alt: #FFF8E7;
      --card-border: #E6C37D;
      --text-dark: #292524;
      --text-body: #57534E;
      --text-muted: #A8A29E;
      --text-red: #B91C1C;
      --text-gold: #92400E;
      --green: #16A34A;
      --error: #DC2626;
      --warning: #EA580C;
      --font-title: 'Ma Shan Zheng', serif;
      --font-body: 'Noto Serif SC', serif;
      --r-sm: 8px;
      --r-md: 14px;
      --r-lg: 20px;
      --r-xl: 30px;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: var(--font-body);
      background: linear-gradient(135deg, #7F1D1D 0%, #450A0A 100%);
      color: var(--text-body);
      min-height: 100vh;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      line-height: 1.6;
    }

    /* â”€â”€ èƒŒæ™¯ â”€â”€ */
    .bg-layer {
      position: fixed; inset: 0;
      background: linear-gradient(135deg, #7F1D1D 0%, #450A0A 100%);
      z-index: -2;
    }
    .bg-layer::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image:
        radial-gradient(ellipse 120px 60px at 10% 15%, rgba(230,195,125,0.15) 0%, transparent 50%),
        radial-gradient(ellipse 100px 50px at 25% 18%, rgba(230,195,125,0.12) 0%, transparent 50%),
        radial-gradient(ellipse 140px 70px at 85% 20%, rgba(230,195,125,0.18) 0%, transparent 50%),
        radial-gradient(ellipse 110px 55px at 70% 22%, rgba(230,195,125,0.14) 0%, transparent 50%),
        radial-gradient(ellipse 130px 65px at 15% 45%, rgba(230,195,125,0.16) 0%, transparent 50%),
        radial-gradient(ellipse 95px 48px at 30% 48%, rgba(230,195,125,0.11) 0%, transparent 50%),
        radial-gradient(ellipse 150px 75px at 90% 50%, rgba(230,195,125,0.20) 0%, transparent 50%),
        radial-gradient(ellipse 105px 52px at 75% 53%, rgba(230,195,125,0.13) 0%, transparent 50%),
        radial-gradient(ellipse 125px 62px at 20% 75%, rgba(230,195,125,0.17) 0%, transparent 50%),
        radial-gradient(ellipse 90px 45px at 35% 78%, rgba(230,195,125,0.10) 0%, transparent 50%),
        radial-gradient(ellipse 135px 68px at 80% 80%, rgba(230,195,125,0.19) 0%, transparent 50%),
        radial-gradient(ellipse 100px 50px at 65% 82%, rgba(230,195,125,0.12) 0%, transparent 50%),
        radial-gradient(ellipse 115px 58px at 45% 35%, rgba(230,195,125,0.14) 0%, transparent 50%),
        radial-gradient(ellipse 145px 72px at 55% 65%, rgba(230,195,125,0.16) 0%, transparent 50%);
      opacity: 0.6;
      z-index: -1;
      animation: cloudFloat 60s ease-in-out infinite;
    }
    @keyframes cloudFloat {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-20px) scale(1.05); }
    }
    .bg-layer::after {
      content: 'ç¦ç¦„å¯¿å–œ é‡‘æ¦œé¢˜å é˜–å®¶æ¬¢ä¹ å¹´å¹´æœ‰ä½™ æ­å–œå‘è´¢ ä¸‡äº‹å¦‚æ„ æ­¥æ­¥é«˜å‡ å¿ƒæƒ³äº‹æˆ å‰ç¥¥å¦‚æ„ å¤§å‰å¤§åˆ©';
      position: absolute; inset: 0;
      font-family: var(--font-title); font-size: 18px; font-weight: 700;
      color: rgba(230,195,125,0.08);
      line-height: 3.5; letter-spacing: 20px; word-break: break-all;
      overflow: hidden; z-index: -1; padding: 20px;
      transform: rotate(-15deg) scale(1.3); transform-origin: center;
    }

    #game-container {
      max-width: 420px; margin: 0 auto;
      min-height: 100vh; position: relative;
      display: flex; flex-direction: column;
      padding-bottom: env(safe-area-inset-bottom);
    }

    /* â”€â”€ çŠ¶æ€æ  â”€â”€ */
    #status-bar {
      display: none; justify-content: space-around;
      padding: 10px 16px;
      background: var(--card-bg);
      position: sticky; top: 0; z-index: 100;
      border-bottom: 2px solid rgba(230,195,125,0.3);
      box-shadow: 0 2px 12px rgba(230,195,125,0.15);
    }
    #status-bar.visible { display: flex; }
    .stat-item { text-align: center; flex: 1; }
    .stat-item + .stat-item { border-left: 1px solid rgba(230,195,125,0.25); }
    .stat-label { font-size: 10px; color: var(--text-muted); margin-bottom: 2px; font-weight: 600; letter-spacing: 1px; }
    .stat-value { font-size: 22px; font-weight: 700; color: var(--text-red); font-family: var(--font-title); }

    /* â”€â”€ å±å¹• â”€â”€ */
    .screen { display: none; flex: 1; padding: 12px; animation: fadeIn 0.4s ease; }
    .screen.active { display: flex; flex-direction: column; }
    @keyframes fadeIn { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }
    @keyframes slideIn { from { opacity:0; transform:translateX(20px); } to { opacity:1; transform:translateX(0); } }
    @keyframes slideUp { from { opacity:0; transform:translateY(14px); } to { opacity:1; transform:translateY(0); } }
    @keyframes pulse { 0%,100% { transform:scale(1); } 50% { transform:scale(1.06); } }
    
    /* â”€â”€ çº¢åŒ…æ‰è½åŠ¨ç”» â”€â”€ */
    @keyframes redPacketFall {
      0% {
        top: -50px;
        opacity: 1;
      }
      100% {
        top: 110vh;
        opacity: 0.8;
      }
    }
    
    @keyframes redPacketSwing {
      0%, 100% { margin-left: 0; }
      25% { margin-left: -15px; }
      75% { margin-left: 15px; }
    }
    
    .red-packet {
      position: fixed;
      top: -50px;
      font-size: 32px;
      z-index: 9999;
      pointer-events: none;
      animation: redPacketFall 3s linear forwards;
      filter: drop-shadow(0 2px 8px rgba(185,28,28,0.4));
    }
    
    .red-packet.swing {
      animation: redPacketFall 3s linear forwards, redPacketSwing 0.8s ease-in-out infinite;
    }

    /* â”€â”€ ä¸»å¡ç‰‡ â”€â”€ */
    .card-main {
      background: var(--card-bg);
      border: 4px double var(--gold);
      border-radius: var(--r-xl);
      padding: 28px 24px;
      box-shadow: 0 0 30px rgba(230,195,125,0.3);
      position: relative;
    }
    .card-main::after {
      content: ''; position: absolute; inset: 8px;
      border: 1px solid rgba(230,195,125,0.3);
      border-radius: calc(var(--r-xl) - 6px);
      pointer-events: none;
    }

    /* â”€â”€ èº«ä»½å¡ç¥¥äº‘èƒŒæ™¯ â”€â”€ */
    .id-card-bg {
      position: relative;
      overflow: hidden;
      background: linear-gradient(to bottom, #FFFBF0 0%, #FFF8E7 100%);
    }
    .id-card-bg::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image:
        radial-gradient(ellipse 70px 35px at 15% 20%, rgba(230,195,125,0.12) 0%, transparent 70%),
        radial-gradient(ellipse 90px 40px at 80% 15%, rgba(230,195,125,0.10) 0%, transparent 70%),
        radial-gradient(ellipse 60px 30px at 40% 50%, rgba(230,195,125,0.08) 0%, transparent 70%),
        radial-gradient(ellipse 80px 35px at 85% 55%, rgba(230,195,125,0.12) 0%, transparent 70%),
        radial-gradient(ellipse 65px 32px at 20% 75%, rgba(230,195,125,0.10) 0%, transparent 70%),
        radial-gradient(ellipse 75px 38px at 60% 80%, rgba(230,195,125,0.08) 0%, transparent 70%);
      pointer-events: none;
      z-index: 0;
    }
    .id-card-bg > * { position: relative; z-index: 1; }
    .id-card-header {
      text-align: center;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(201,168,76,0.2);
      margin-bottom: 20px;
    }
    .id-card-title {
      font-family: var(--font-title);
      font-size: 22px;
      color: var(--text-red);
      letter-spacing: 4px;
      margin: 0;
    }
    .id-card-subtitle {
      font-size: 10px;
      color: var(--gold-dark);
      letter-spacing: 3px;
      margin-top: 4px;
    }
    .id-card-seal {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 52px;
      height: 52px;
      border: 2px solid var(--gold);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: var(--red);
      background: rgba(230,195,125,0.1);
      z-index: 1;
      cursor: pointer;
      transition: all 0.3s ease;
      user-select: none;
      box-shadow: 0 2px 8px rgba(230,195,125,0.3);
    }
    .id-card-seal:hover {
      transform: scale(1.15) rotate(10deg);
      border-color: var(--gold-dark);
      box-shadow: 0 0 25px rgba(230,195,125,0.6);
      background: rgba(230,195,125,0.2);
    }
    .id-card-seal:active {
      transform: scale(0.95);
    }

    /* â”€â”€ æ™®é€šå¡ç‰‡ â”€â”€ */
    .card {
      background: var(--card-bg);
      border-radius: var(--r-md);
      padding: 14px 16px;
      box-shadow: 0 2px 8px rgba(230,195,125,0.15);
      border: 1px solid rgba(230,195,125,0.2);
    }

    /* â”€â”€ å¯¹è¯å¡ç‰‡ â”€â”€ */
    .card-dialogue {
      background: var(--card-bg);
      border: 2px solid var(--gold-border);
      border-radius: var(--r-lg);
      padding: 20px 18px;
      box-shadow: 0 0 20px rgba(230,195,125,0.15);
    }

    /* â”€â”€ çº¢è‰²ä¸»æŒ‰é’® â”€â”€ */
    .btn-red {
      background: linear-gradient(to right, #B91C1C, #DC2626);
      color: #fff;
      border: 2px solid #FDE68A;
      padding: 14px 40px;
      font-size: 16px;
      font-weight: 700;
      font-family: var(--font-body);
      border-radius: var(--r-md);
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(185,28,28,0.4);
      letter-spacing: 2px;
    }
    .btn-red:hover { 
      background: linear-gradient(to right, #DC2626, #EF4444);
      transform: translateY(-2px); 
      box-shadow: 0 6px 20px rgba(185,28,28,0.5); 
    }
    .btn-red:active { transform: translateY(0); }

    /* â”€â”€ é‡‘è‰²æŒ‰é’® â”€â”€ */
    .btn-gold {
      background: var(--gold-light);
      color: var(--text-dark);
      border: 2px solid var(--gold-dark);
      padding: 12px 32px;
      font-size: 15px;
      font-weight: 700;
      font-family: var(--font-body);
      border-radius: var(--r-md);
      cursor: pointer;
      transition: all 0.3s ease;
      letter-spacing: 1px;
    }
    .btn-gold:hover { 
      background: var(--gold); 
      color: var(--text-dark);
      box-shadow: 0 4px 12px rgba(202,138,4,0.3);
    }

    /* â”€â”€ é€‰é¡¹æŒ‰é’® â”€â”€ */
    .btn-option {
      background: #FFF;
      color: var(--text-body);
      border: 1px solid var(--card-border);
      border-left: 3px solid var(--red);
      padding: 13px 14px;
      font-size: 14px;
      font-family: var(--font-body);
      border-radius: var(--r-sm);
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: left;
      line-height: 1.5;
    }
    .btn-option:hover {
      background: var(--card-bg-alt);
      border-left-color: var(--gold);
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      transform: translateX(3px);
    }
    .btn-option:disabled { opacity: 0.45; cursor: not-allowed; transform: none; }

    /* â”€â”€ æ¬¡è¦æŒ‰é’® â”€â”€ */
    .btn-secondary {
      background: var(--gold-light);
      color: var(--text-body);
      border: 1px solid var(--gold-dark);
      padding: 4px 10px;
      font-size: 12px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 600;
      white-space: nowrap;
      flex-shrink: 0;
    }
    .btn-secondary:hover { 
      border-color: var(--gold-dark); 
      background: var(--gold);
      box-shadow: 0 2px 8px rgba(202,138,4,0.2);
    }

    /* â”€â”€ å¤´åƒ â”€â”€ */
    .avatar-frame {
      width: 52px; height: 52px;
      border-radius: 50%;
      border: 2px solid var(--gold);
      display: flex; align-items: center; justify-content: center;
      position: relative; overflow: hidden;
      box-shadow: 0 3px 10px rgba(230,195,125,0.3);
      transition: all 0.3s ease;
      flex-shrink: 0;
      background: var(--card-bg-alt);
    }
    .avatar-frame.clickable { cursor: pointer; }
    .avatar-frame.clickable:hover { 
      transform: scale(1.12); 
      border-color: var(--red); 
      box-shadow: 0 4px 16px rgba(185,28,28,0.4); 
    }
    .avatar-frame .avatar-bg { position: absolute; inset: 0; border-radius: 50%; }
    .avatar-frame .avatar-emoji { font-size: 26px; position: relative; z-index: 1; }
    .avatar-frame-sm { width: 40px; height: 40px; }
    .avatar-frame-sm .avatar-emoji { font-size: 20px; }
    .avatar-frame-lg { width: 68px; height: 68px; }
    .avatar-frame-lg .avatar-emoji { font-size: 34px; }

    /* â”€â”€ ååº”å¡ â”€â”€ */
    .card-reaction {
      background: var(--card-bg-alt);
      border: 1px solid var(--card-border);
      border-left: 3px solid var(--gold);
      border-radius: 0 var(--r-sm) var(--r-sm) 0;
      padding: 12px 14px;
      animation: slideUp 0.3s ease;
    }

    /* â”€â”€ æˆå°±å¡ â”€â”€ */
    .achievement-card {
      background: #FFF;
      border: 1px solid var(--card-border);
      border-radius: var(--r-md);
      padding: 10px 12px;
      text-align: center;
      transition: all 0.2s ease;
      min-width: 80px;
    }
    .achievement-card:hover { border-color: var(--gold); transform: translateY(-2px); box-shadow: 0 3px 10px rgba(0,0,0,0.08); }

    /* â”€â”€ æ ‡ç­¾ â”€â”€ */
    .tag {
      display: inline-block;
      background: rgba(0,0,0,0.05);
      color: var(--text-red);
      font-size: 11px; font-weight: 600;
      padding: 3px 10px;
      border-radius: 4px;
    }
    .tag-gold { background: rgba(230,195,125,0.15); color: var(--text-gold); }

    /* â”€â”€ åˆ†éš”çº¿ â”€â”€ */
    .divider { display: flex; align-items: center; gap: 12px; margin: 16px 0; }
    .divider::before, .divider::after { content: ''; flex: 1; height: 1px; background: rgba(230,195,125,0.3); }
    .divider span { color: var(--text-muted); font-size: 10px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; opacity: 0.7; }

    /* â”€â”€ è¿›åº¦æ¡ â”€â”€ */
    .progress-bar { height: 3px; background: var(--card-border); border-radius: 2px; overflow: hidden; }
    .progress-bar-fill { height: 100%; background: linear-gradient(90deg, var(--red), var(--red-light)); border-radius: 2px; transition: width 0.4s ease; }

    /* â”€â”€ é…’æ¯ â”€â”€ */
    .glass-container {
      width: 28px; height: 44px;
      border: 2px solid var(--gold); border-top: none;
      border-radius: 0 0 6px 6px;
      position: relative; overflow: hidden; cursor: pointer;
      background: rgba(255,255,255,0.4);
    }
    .glass-fill { position: absolute; bottom: 0; width: 100%; background: linear-gradient(to top, #D4A017, #F0C040, #FFE880); transition: height 0.4s ease; }

    /* â”€â”€ å¼¹çª— â”€â”€ */
    .popup-overlay {
      position: fixed; inset: 0;
      background: rgba(69,10,10,0.7);
      backdrop-filter: blur(4px);
      z-index: 300;
      display: flex; align-items: center; justify-content: center;
      animation: fadeIn 0.25s ease;
    }
    .popup-card {
      background: var(--card-bg);
      border: 4px double var(--gold);
      border-radius: var(--r-xl);
      padding: 32px 24px;
      max-width: 360px; width: 88%;
      box-shadow: 0 0 30px rgba(230,195,125,0.3), 0 8px 32px rgba(0,0,0,0.25);
      text-align: center;
      animation: slideUp 0.35s ease;
      position: relative;
    }
    .popup-card::after {
      content: ''; position: absolute; inset: 8px;
      border: 1px solid rgba(230,195,125,0.25);
      border-radius: calc(var(--r-xl) - 6px);
      pointer-events: none;
    }

    /* â”€â”€ åœ†æ¡Œ â”€â”€ */
    .round-table {
      width: 100px; height: 100px;
      border-radius: 50%;
      background: var(--card-bg-alt);
      border: 2px solid var(--gold);
      display: flex; align-items: center; justify-content: center;
      font-size: 11px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      line-height: 1.3;
      text-align: center;
      padding: 4px;
    }
    
    /* â”€â”€ åœ†æ¡Œæ—‹è½¬åŠ¨ç”» â”€â”€ */
    @keyframes rotateTable {
      from { transform: translate(-50%, -50%) rotate(0deg); }
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
    
    .seating-container {
      animation: rotateTable 60s linear infinite;
    }
    
    .seating-container.speed-hard {
      animation: rotateTable 30s linear infinite;
    }
    
    .seating-container.speed-hell {
      animation: rotateTable 15s linear infinite;
    }

    /* â”€â”€ ä¿¡æ¯è¡Œ â”€â”€ */
    .info-row {
      display: flex; align-items: center; gap: 12px;
      padding: 10px 0;
    }
    .info-row + .info-row { border-top: 1px solid rgba(230,195,125,0.25); }
    .info-icon {
      width: 36px; height: 36px;
      border-radius: 50%;
      background: rgba(185,28,28,0.08);
      color: var(--text-red);
      display: flex; align-items: center; justify-content: center;
      font-size: 15px; font-weight: 700;
      flex-shrink: 0;
    }
    .info-label { font-size: 10px; color: var(--text-muted); letter-spacing: 1px; text-transform: uppercase; }
    .info-value { font-size: 15px; font-weight: 700; color: var(--text-dark); font-family: var(--font-body); }

    /* â”€â”€ æ•°å€¼å±•ç¤º â”€â”€ */
    .stats-row {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;
      padding: 0;
    }
    .stats-row .stat-col { 
      text-align: center; 
      padding: 12px 8px;
      background: var(--card-bg-alt);
      border-radius: var(--r-sm);
    }
    .stats-row .stat-col + .stat-col { border-left: none; }
    .stats-row .stat-num { font-size: 26px; font-weight: 700; color: var(--text-red); font-family: var(--font-title); display: block; }
    .stats-row .stat-lbl { font-size: 10px; color: var(--text-muted); margin-bottom: 2px; opacity: 0.7; }

    /* â”€â”€ å“åº”å¼ â”€â”€ */
    @media (min-width: 768px) { #game-container { max-width: 460px; } .screen { padding: 20px; } }
    @media (max-width: 360px) { .btn-red { padding: 11px 28px; font-size: 15px; } .avatar-frame { width: 46px; height: 46px; } .avatar-frame .avatar-emoji { font-size: 22px; } }
  </style>
</head>
<body>
  <div class="bg-layer"></div>
  <div id="status-bar">
    <div class="stat-item"><div class="stat-label">ğŸ˜ é¢å­</div><div class="stat-value" id="face-score">50</div></div>
    <div class="stat-item"><div class="stat-label">ğŸ§  å¿ƒæ€</div><div class="stat-value" id="mood-score">50</div></div>
    <div class="stat-item"><div class="stat-label">ğŸº é…’ç²¾åº¦</div><div class="stat-value" id="alcohol-level">0</div></div>
  </div>
  <div id="game-container">
    <div id="screen-cover" class="screen active"></div>
    <div id="screen-identity" class="screen"></div>
    <div id="screen-intro" class="screen"></div>
    <div id="screen-seating" class="screen"></div>
    <div id="screen-dialogue" class="screen"></div>
    <div id="screen-toast" class="screen"></div>
    <div id="screen-result" class="screen"></div>
  </div>
  <button id="bgm-toggle" style="position:fixed;bottom:16px;right:16px;z-index:200;background:var(--card-bg);border:1.5px solid var(--gold);color:var(--text-red);width:36px;height:36px;border-radius:50%;cursor:pointer;font-size:16px;display:none;" aria-label="BGM">ğŸ”‡</button>
  
  <!-- å¾®ä¿¡äºŒç»´ç æŒ‰é’® -->
  <button id="wechat-qr-btn" style="position:fixed;bottom:64px;right:16px;z-index:200;background:var(--gold-light);border:2px solid var(--gold);color:var(--text-dark);width:48px;height:48px;border-radius:50%;cursor:pointer;font-size:20px;box-shadow:0 3px 12px rgba(201,168,76,0.4);transition:all 0.2s ease;" aria-label="å¾®ä¿¡äºŒç»´ç " title="è”ç³»ä½œè€…">ğŸ’¬</button>
  
  <script src="data.js"></script>
  <script src="engine.js"></script>
  <script src="app.js"></script>
  
  <script>
    // çº¢åŒ…æ‰è½ç‰¹æ•ˆ
    function createRedPacketRain() {
      const redPacketEmojis = ['ğŸ§§', 'ğŸ’°', 'ğŸ’´', 'ğŸ’µ', 'ğŸ’¸', 'ğŸ'];
      const count = 15 + Math.floor(Math.random() * 10);
      
      for (let i = 0; i < count; i++) {
        setTimeout(() => {
          const packet = document.createElement('div');
          packet.className = 'red-packet' + (Math.random() > 0.5 ? ' swing' : '');
          packet.textContent = redPacketEmojis[Math.floor(Math.random() * redPacketEmojis.length)];
          
          packet.style.left = (Math.random() * 90 + 5) + '%';
          packet.style.top = '-50px';
          
          const duration = 2.5 + Math.random() * 1.5;
          packet.style.animationDuration = duration + 's';
          
          document.body.appendChild(packet);
          
          setTimeout(() => { packet.remove(); }, duration * 1000);
        }, i * 80);
      }
    }
    
    // ç›‘å¬ç¦å­—ç‚¹å‡»ï¼ˆä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œå› ä¸ºç¦å­—æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼‰
    let fuClickCount = 0;
    document.addEventListener('click', (e) => {
      // æ£€æŸ¥æ˜¯å¦ç‚¹å‡»äº†ç¦å­—æˆ–å…¶å†…éƒ¨å…ƒç´ 
      let target = e.target;
      let fuElement = null;
      
      // å‘ä¸ŠæŸ¥æ‰¾æœ€å¤š3å±‚ï¼Œæ‰¾åˆ° id-card-seal å…ƒç´ 
      for (let i = 0; i < 3; i++) {
        if (target && target.classList && target.classList.contains('id-card-seal')) {
          fuElement = target;
          break;
        }
        target = target.parentElement;
      }
      
      if (fuElement) {
        console.log('ç¦å­—è¢«ç‚¹å‡»äº†ï¼'); // è°ƒè¯•ä¿¡æ¯
        fuClickCount++;
        
        // ç¦å­—æ—‹è½¬åŠ¨ç”»
        fuElement.style.transition = 'transform 0.3s ease';
        fuElement.style.transform = 'rotate(360deg) scale(1.2)';
        
        setTimeout(() => {
          fuElement.style.transform = 'rotate(0deg) scale(1)';
        }, 300);
        
        // è§¦å‘çº¢åŒ…é›¨
        createRedPacketRain();
        
        // ç‰¹æ®Šæç¤º
        if (fuClickCount === 1) {
          showToast('ğŸ§§ æ­å–œå‘è´¢ï¼çº¢åŒ…é›¨æ¥å•¦ï¼');
        } else if (fuClickCount === 5) {
          showToast('ğŸ’° è´¢è¿äº¨é€šï¼ä½ å·²ç»ç‚¹äº†5æ¬¡ç¦å­—ï¼');
        } else if (fuClickCount === 10) {
          showToast('ğŸ’¸ è´¢ç¥é™„ä½“ï¼ä½ æ˜¯çœŸçš„çˆ±é’±å•Šï¼');
        }
      }
    });
    
    // ç®€å•çš„æç¤ºå‡½æ•°
    function showToast(message) {
      const toast = document.createElement('div');
      toast.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(197, 48, 48, 0.95);
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        z-index: 9999;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        animation: fadeIn 0.3s ease;
        pointer-events: none;
      `;
      toast.textContent = message;
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transition = 'opacity 0.3s ease';
        setTimeout(() => toast.remove(), 300);
      }, 2000);
    }
    
    // å¾®ä¿¡äºŒç»´ç å¼¹çª—
    document.getElementById('wechat-qr-btn').addEventListener('click', () => {
      const overlay = document.createElement('div');
      overlay.className = 'popup-overlay';
      overlay.innerHTML = `
        <div class="popup-card" style="max-width:360px;">
          <p style="font-family:var(--font-title);font-size:24px;color:var(--text-red);margin-bottom:8px;">ğŸ‘‹ è”ç³»ä½œè€…</p>
          <p style="color:var(--text-muted);font-size:13px;margin-bottom:16px;">æ‰«ç æ·»åŠ å¾®ä¿¡ï¼Œäº¤æµåé¦ˆ</p>
          <div style="background:#FFF;padding:16px;border-radius:12px;margin-bottom:16px;border:1px solid var(--card-border);">
            <img src="wechat-qr.png" alt="å¾®ä¿¡äºŒç»´ç " style="width:100%;max-width:240px;height:auto;display:block;margin:0 auto;" onerror="this.parentElement.innerHTML='<div style=\\'padding:60px 20px;color:var(--text-muted);font-size:14px;\\'>äºŒç»´ç åŠ è½½å¤±è´¥<br>è¯·æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦ä¸º<br><strong style=\\'color:var(--text-red);\\'>wechat-qr.png</strong></div>'">
          </div>
          <p style="font-size:12px;color:var(--text-muted);line-height:1.6;margin-bottom:16px;">
            ç‰©ç†è€å¸ˆ Â· æˆå‰§äºº Â· AIæŠ˜è…¾å®¶<br>
            æ¬¢è¿äº¤æµæ¸¸æˆåˆ›æ„å’ŒAIåº”ç”¨
          </p>
          <button class="btn-gold" id="btn-close-wechat" style="width:100%;padding:12px;">å…³é—­</button>
        </div>
      `;
      document.body.appendChild(overlay);
      document.getElementById('btn-close-wechat').addEventListener('click', () => overlay.remove());
      overlay.addEventListener('click', (e) => { if (e.target === overlay) overlay.remove(); });
    });
    
    // æŒ‰é’®æ‚¬åœæ•ˆæœ
    const wechatBtn = document.getElementById('wechat-qr-btn');
    wechatBtn.addEventListener('mouseenter', () => {
      wechatBtn.style.transform = 'scale(1.1)';
      wechatBtn.style.boxShadow = '0 4px 16px rgba(201,168,76,0.5)';
    });
    wechatBtn.addEventListener('mouseleave', () => {
      wechatBtn.style.transform = 'scale(1)';
      wechatBtn.style.boxShadow = '0 3px 12px rgba(201,168,76,0.4)';
    });
  </script>
</body>
</html>
